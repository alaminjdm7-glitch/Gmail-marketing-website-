<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Pro Invest V10</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #0f2027; --sec: #203a43; --accent: #2c5364; --gold: #f1c40f; --text: #ecf0f1; --bg: #f4f6f8; }
        body { margin: 0; font-family: 'Inter', sans-serif; background: var(--bg); color: #333; padding-bottom: 80px; user-select: none; }
        
        /* AUTH SCREEN */
        #auth-screen { height: 100vh; display: flex; flex-direction: column; justify-content: center; background: linear-gradient(to right, #0f2027, #203a43, #2c5364); padding: 30px; text-align: center; color: white; }
        .glass-panel { background: rgba(255,255,255,0.1); backdrop-filter: blur(10px); padding: 30px; border-radius: 20px; border: 1px solid rgba(255,255,255,0.2); }
        input { width: 100%; padding: 15px; margin: 10px 0; border: none; border-radius: 8px; font-size: 15px; outline: none; background: rgba(255,255,255,0.9); }
        .btn { width: 100%; padding: 15px; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; background: linear-gradient(45deg, #11998e, #38ef7d); color: white; font-size: 16px; margin-top: 15px; transition: 0.3s; }
        
        /* HEADER AREA */
        .header { background: linear-gradient(to right, #0f2027, #2c5364); padding: 20px 20px 80px; border-radius: 0 0 35px 35px; color: white; position: relative; overflow: hidden; }
        .server-time { font-size: 12px; background: rgba(0,0,0,0.3); padding: 5px 12px; border-radius: 20px; display: inline-flex; align-items: center; gap: 5px; border: 1px solid rgba(255,255,255,0.2); }
        .live-dot { height: 8px; width: 8px; background: #e74c3c; border-radius: 50%; animation: blink 1s infinite; }
        @keyframes blink { 50% { opacity: 0; } }

        /* BALANCE CARD */
        .balance-card { background: white; width: 88%; margin: -60px auto 10px; padding: 25px 20px; border-radius: 20px; text-align: center; box-shadow: 0 15px 35px rgba(0,0,0,0.1); position: relative; z-index: 10; }
        .btn-row { display: flex; gap: 10px; justify-content: center; margin-top: 15px; }
        .action-btn { flex: 1; padding: 12px; border-radius: 10px; border: none; color: white; font-weight: 600; font-size: 14px; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 5px; }
        
        /* MARQUEE NOTICE */
        .marquee-box { background: #fff3cd; color: #856404; padding: 10px; margin: 10px 20px; border-radius: 8px; font-size: 13px; display: flex; align-items: center; gap: 10px; overflow: hidden; border: 1px solid #ffeeba; }
        
        /* MENU GRID */
        .grid-menu { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; padding: 10px 20px; }
        .menu-item { background: white; padding: 15px 5px; border-radius: 12px; text-align: center; font-size: 11px; box-shadow: 0 4px 10px rgba(0,0,0,0.03); cursor: pointer; transition: transform 0.2s; }
        .menu-item:active { transform: scale(0.95); }
        .menu-item i { font-size: 24px; margin-bottom: 5px; background: -webkit-linear-gradient(#11998e, #38ef7d); -webkit-background-clip: text; -webkit-text-fill-color: transparent; display: block; }

        /* PLANS & LISTS */
        .section-title { padding: 0 20px; margin: 20px 0 10px; font-weight: 700; color: #2c3e50; display: flex; justify-content: space-between; align-items: center; }
        .card { background: white; margin: 10px 20px; padding: 15px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.04); display: flex; align-items: center; gap: 15px; position: relative; overflow: hidden; }
        .card::before { content: ''; position: absolute; left: 0; top: 0; height: 100%; width: 4px; background: linear-gradient(to bottom, #11998e, #38ef7d); }
        .card img { width: 55px; height: 55px; border-radius: 10px; object-fit: cover; background: #eee; }
        
        /* BOTTOM NAV */
        .nav { position: fixed; bottom: 0; width: 100%; background: white; display: flex; justify-content: space-around; padding: 12px 0; border-top: 1px solid #eee; z-index: 100; box-shadow: 0 -5px 20px rgba(0,0,0,0.05); }
        .nav-item { text-align: center; color: #95a5a6; font-size: 10px; cursor: pointer; transition: 0.3s; }
        .nav-item i { font-size: 22px; display: block; margin-bottom: 3px; }
        .nav-item.active { color: #2c3e50; font-weight: bold; }
        .nav-item.active i { color: #11998e; transform: translateY(-3px); }

        /* LIVE NOTIFICATION POPUP */
        .live-payout { position: fixed; top: 20px; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.8); color: white; padding: 8px 15px; border-radius: 30px; font-size: 12px; z-index: 9999; display: flex; align-items: center; gap: 8px; opacity: 0; transition: 0.5s; pointer-events: none; }
        
        /* MODALS */
        .modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); z-index: 1000; display: flex; justify-content: center; align-items: center; backdrop-filter: blur(4px); }
        .modal-box { background: white; width: 85%; padding: 25px; border-radius: 20px; position: relative; animation: slideUp 0.3s; }
        @keyframes slideUp { from{transform:translateY(20px); opacity:0} to{transform:translateY(0); opacity:1} }
        
        .hidden { display: none !important; }
    </style>
</head>
<body>

    <!-- LIVE FAKE PAYOUT -->
    <div id="live-pop" class="live-payout"><i class="fas fa-check-circle" style="color:#2ecc71"></i> <span id="pop-text">User 89** withdrew 500 Tk</span></div>

    <!-- AUTH -->
    <div id="auth-screen">
        <div class="glass-panel">
            <h1 style="margin:0;">ULTIMATE PRO</h1>
            <p style="font-size:12px; opacity:0.8;">Secure Investment Platform</p>
            <br>
            <input type="email" id="email" placeholder="Enter Email">
            <input type="password" id="pass" placeholder="Enter Password">
            <button class="btn" onclick="login()">LOGIN NOW</button>
            <button class="btn" style="background:transparent; border:1px solid white; margin-top:10px;" onclick="register()">CREATE ACCOUNT</button>
        </div>
    </div>

    <!-- APP -->
    <div id="app-screen" class="hidden">
        
        <!-- HOME TAB -->
        <div id="tab-home">
            <div class="header">
                <div style="display:flex; justify-content:space-between; align-items:flex-start;">
                    <div>
                        <small style="opacity:0.8">Welcome Back,</small><br>
                        <b style="font-size:18px;" id="u-name">...</b>
                        <div style="margin-top:5px;">
                            <div class="server-time">
                                <div class="live-dot"></div> Server Running: <span id="timer-display">00h 00m 00s</span>
                            </div>
                        </div>
                    </div>
                    <div style="position:relative;" onclick="alert('No new notifications')">
                        <i class="fas fa-bell" style="font-size:24px;"></i>
                        <span style="position:absolute; top:-2px; right:-2px; background:red; height:8px; width:8px; border-radius:50%;"></span>
                    </div>
                </div>
            </div>

            <div class="balance-card">
                <small style="color:#777; letter-spacing:1px;">TOTAL ASSETS</small>
                <h1 style="margin:5px 0; font-size:38px; color:#2c3e50;">৳ <span id="u-bal">0.00</span></h1>
                <div class="btn-row">
                    <button class="action-btn" style="background:#27ae60;" onclick="openDep()"><i class="fas fa-wallet"></i> Deposit</button>
                    <button class="action-btn" style="background:#c0392b;" onclick="openWith()"><i class="fas fa-download"></i> Withdraw</button>
                </div>
            </div>

            <div class="marquee-box">
                <i class="fas fa-bullhorn" style="color:#f39c12"></i>
                <marquee id="notice-text">Welcome to our Pro Investment Platform. Invest & Earn daily!</marquee>
            </div>

            <div class="grid-menu">
                <div class="menu-item" onclick="nav('task', this)"><i class="fas fa-gift"></i>Free Task</div>
                <div class="menu-item" onclick="nav('invest', this)"><i class="fas fa-layer-group"></i>Plans</div>
                <div class="menu-item" onclick="nav('hist', this)"><i class="fas fa-history"></i>History</div>
                <div class="menu-item" onclick="openSupport()"><i class="fab fa-telegram"></i>Support</div>
            </div>

            <div class="section-title">Active Investments</div>
            <div id="my-plans"></div>

            <div class="section-title">About Company</div>
            <div style="margin:10px 20px; padding:15px; background:white; border-radius:15px; font-size:12px; color:#555; line-height:1.6;" id="about-text">
                Loading company info...
            </div>
        </div>

        <!-- INVEST TAB -->
        <div id="tab-invest" class="hidden">
            <div class="section-title">Premium Plans</div>
            <div id="plan-list" style="padding-bottom:100px;"></div>
        </div>

        <!-- TASK TAB -->
        <div id="tab-task" class="hidden">
            <div class="section-title">Daily Rewards</div>
            <div id="task-list" style="padding-bottom:100px;"></div>
        </div>

        <!-- HISTORY TAB -->
        <div id="tab-hist" class="hidden">
            <div class="section-title">All Transactions</div>
            <div id="hist-list" style="padding-bottom:100px;"></div>
        </div>

        <!-- PROFILE TAB -->
        <div id="tab-prof" class="hidden">
            <div style="background:white; margin:20px; padding:30px; border-radius:20px; text-align:center;">
                <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" width="80">
                <h3 id="p-email" style="margin:10px 0;">...</h3>
                <p style="color:#777; font-size:12px;">UID: <span id="p-uid">...</span></p>
                
                <div style="margin-top:20px; text-align:left;">
                    <small>Change Password</small>
                    <input type="text" id="new-pass" placeholder="New Password" style="background:#f1f2f6; border:1px solid #ddd;">
                    <button class="btn" style="padding:10px; margin-top:5px; font-size:14px;" onclick="changePass()">Update Password</button>
                </div>
                
                <button class="btn" style="background:#2d3436; margin-top:30px;" onclick="auth.signOut()">SECURE LOGOUT</button>
            </div>
        </div>

        <!-- NAVIGATION -->
        <div class="nav">
            <div class="nav-item active" onclick="nav('home', this)"><i class="fas fa-home"></i>Home</div>
            <div class="nav-item" onclick="nav('task', this)"><i class="fas fa-check-circle"></i>Task</div>
            <div class="nav-item" onclick="nav('invest', this)"><i class="fas fa-chart-pie"></i>Invest</div>
            <div class="nav-item" onclick="nav('prof', this)"><i class="fas fa-user"></i>Profile</div>
        </div>
    </div>

    <!-- MODALS -->
    <!-- Deposit -->
    <div id="modal-dep" class="modal hidden">
        <div class="modal-box">
            <span style="position:absolute; top:15px; right:20px; font-size:24px; cursor:pointer;" onclick="clsMod()">&times;</span>
            <h3>Add Funds</h3>
            <div style="background:#d1f7c4; padding:10px; border-radius:8px; font-size:12px; color:#27ae60; margin-bottom:10px;">
                <i class="fas fa-tag"></i> <span id="bonus-msg">Checking offers...</span>
            </div>
            <select id="dep-m" onchange="updNum()"><option>Bkash</option><option>Nagad</option><option>Rocket</option><option>Upay</option></select>
            <div style="background:#f8f9fa; padding:10px; border-radius:8px; margin-bottom:10px; border:1px dashed #ccc;">
                <small>Send Money To:</small><br>
                <b id="adm-num" style="font-size:18px; color:#2980b9;">Select Method</b>
            </div>
            <input type="number" id="dep-a" placeholder="Amount (BDT)">
            <input type="text" id="dep-t" placeholder="Transaction ID">
            <button class="btn" onclick="subDep()">CONFIRM DEPOSIT</button>
        </div>
    </div>

    <!-- Withdraw -->
    <div id="modal-with" class="modal hidden">
        <div class="modal-box">
            <span style="position:absolute; top:15px; right:20px; font-size:24px; cursor:pointer;" onclick="clsMod()">&times;</span>
            <h3>Withdraw Balance</h3>
            <input type="number" id="with-a" placeholder="Amount (BDT)">
            <select id="with-m"><option>Bkash</option><option>Nagad</option><option>Rocket</option><option>Upay</option></select>
            <input type="number" id="with-n" placeholder="Your Wallet Number">
            <button class="btn" onclick="subWith()">REQUEST WITHDRAW</button>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyCr1lwecwcz-IDQZUHdGqJfeLNGsV_nIGU",
            authDomain: "invest-income-dd9ae.firebaseapp.com",
            databaseURL: "https://invest-income-dd9ae-default-rtdb.firebaseio.com",
            projectId: "invest-income-dd9ae",
            storageBucket: "invest-income-dd9ae.firebasestorage.app",
            messagingSenderId: "278358532664",
            appId: "1:278358532664:web:85f40fce59839efe8b7ccd",
            measurementId: "G-YVTZ3FY6RG"
        };
        firebase.initializeApp(firebaseConfig);
        const auth=firebase.auth(), db=firebase.database();
        let user=null, settings=null, timerInterval=null;

        auth.onAuthStateChanged(u=>{
            if(u){
                document.getElementById('auth-screen').classList.add('hidden');
                document.getElementById('app-screen').classList.remove('hidden');
                loadData(u.uid);
            } else {
                document.getElementById('auth-screen').classList.remove('hidden');
                document.getElementById('app-screen').classList.add('hidden');
            }
        });

        function register(){
            const e=document.getElementById('email').value, p=document.getElementById('pass').value;
            auth.createUserWithEmailAndPassword(e,p).then(c=>{
                db.ref('users/'+c.user.uid).set({email:e, balance:0, role:'user', joined:Date.now()});
            }).catch(e=>alert(e.message));
        }
        function login(){
            auth.signInWithEmailAndPassword(document.getElementById('email').value, document.getElementById('pass').value).catch(e=>alert(e.message));
        }

        function loadData(uid){
            db.ref('users/'+uid).on('value', s=>{
                user=s.val();
                if(user.isBanned){ auth.signOut(); alert("Account Suspended"); return; }
                document.getElementById('u-name').innerText = user.email.split('@')[0];
                document.getElementById('p-email').innerText = user.email;
                document.getElementById('p-uid').innerText = uid;
                document.getElementById('u-bal').innerText = user.balance.toFixed(2);
                
                checkAuto(uid);
                loadPlans();
                loadHist(uid);
                loadMyPlans(uid);
            });

            db.ref('settings').on('value', s=>{
                settings=s.val();
                if(settings){
                    if(settings.notice) document.getElementById('notice-text').innerText = settings.notice;
                    if(settings.about) document.getElementById('about-text').innerText = settings.about;
                    if(settings.dep_msg) document.getElementById('bonus-msg').innerText = settings.dep_msg;
                    
                    // REAL TIME SERVER TIMER
                    if(settings.start_time){
                        clearInterval(timerInterval);
                        timerInterval = setInterval(()=>{
                            const now = Date.now();
                            const diff = now - settings.start_time;
                            const hrs = Math.floor(diff / (1000 * 60 * 60));
                            const min = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                            const sec = Math.floor((diff % (1000 * 60)) / 1000);
                            document.getElementById('timer-display').innerText = `${hrs}h ${min}m ${sec}s`;
                        }, 1000);
                    }
                }
            });

            // TASKS
            db.ref('free_tasks').on('value', s=>{
                const d=document.getElementById('task-list'); d.innerHTML='';
                s.forEach(c=>{
                    d.innerHTML+=`<div class="card">
                        <i class="fas fa-gift" style="font-size:30px; color:#e17055"></i>
                        <div style="flex:1"><b>${c.val().title}</b><br><small>Reward: ৳${c.val().reward}</small></div>
                        <button class="btn" style="width:auto; margin:0; padding:8px 15px;" onclick="window.open('${c.val().link}')">START</button>
                    </div>`;
                });
            });
            
            // FAKE LIVE POPUP
            setInterval(()=>{
                const users = ['89**','72**','15**','99**','01**'];
                const amts = ['500','1000','200','1500'];
                const u = users[Math.floor(Math.random()*users.length)];
                const a = amts[Math.floor(Math.random()*amts.length)];
                const el = document.getElementById('live-pop');
                document.getElementById('pop-text').innerText = `User ${u} withdrew ${a} Tk`;
                el.style.opacity = '1';
                el.style.top = '80px';
                setTimeout(()=>{ el.style.opacity = '0'; el.style.top = '20px'; }, 3000);
            }, 8000);
        }

        // --- LOGIC ---
        function checkAuto(uid){
            db.ref('users/'+uid+'/my_plans').once('value', s=>{
                s.forEach(c=>{
                    const p=c.val();
                    if(Date.now()-p.lastClaim >= 86400000){
                        db.ref('users/'+uid).update({balance: user.balance+p.daily});
                        db.ref('users/'+uid+'/my_plans/'+c.key).update({lastClaim:Date.now()});
                        addHist('Daily Income', p.daily, p.name, 'green');
                    }
                });
            });
        }
        function loadPlans(){
            db.ref('plans').on('value', s=>{
                const d=document.getElementById('plan-list'); d.innerHTML='';
                s.forEach(c=>{
                    const p=c.val();
                    const img = p.img?`<img src="${p.img}">`:'';
                    d.innerHTML+=`<div class="card">
                        ${img} <div style="flex:1"><b>${p.name}</b><br><small>Daily: ৳${p.daily} | Price: ৳${p.price}</small></div>
                        <button class="btn" style="width:auto; margin:0; padding:8px 20px;" onclick="buy('${c.key}',${p.price},${p.daily},'${p.name}')">JOIN</button>
                    </div>`;
                });
            });
        }
        function buy(k,p,d,n){
            if(user.balance<p) return alert("Insufficient Balance");
            db.ref('users/'+auth.currentUser.uid).update({balance:user.balance-p});
            db.ref('users/'+auth.currentUser.uid+'/my_plans').push({name:n, daily:d, lastClaim:Date.now()});
            addHist('Plan Purchase', p, n, 'red');
            alert("Plan Activated Successfully!");
        }

        function addHist(t,a,d,c){ db.ref('users/'+auth.currentUser.uid+'/history').push({type:t, amount:a, desc:d, color:c, time:Date.now()}); }
        function loadHist(uid){
            db.ref('users/'+uid+'/history').limitToLast(50).on('value', s=>{
                const d=document.getElementById('hist-list'); d.innerHTML='';
                const arr=[]; s.forEach(c=>arr.push(c.val()));
                arr.reverse().forEach(h=>{
                    d.innerHTML+=`<div class="card" style="border-left:5px solid ${h.color==='green'?'#2ecc71':'#e74c3c'}">
                        <div style="flex:1"><b>${h.type}</b><br><small>${new Date(h.time).toLocaleString()}</small><br><small style="color:#777">${h.desc}</small></div>
                        <b style="color:${h.color==='green'?'#2ecc71':'#e74c3c'}">৳${h.amount}</b>
                    </div>`;
                });
            });
        }
        function loadMyPlans(uid){
            db.ref('users/'+uid+'/my_plans').on('value', s=>{
                const d=document.getElementById('my-plans'); d.innerHTML='';
                if(!s.exists()) { d.innerHTML='<small style="padding:0 20px">No Active Plans</small>'; return; }
                s.forEach(c=>d.innerHTML+=`<div class="card"><b>${c.val().name}</b> <span style="color:green; font-weight:bold;">● Running</span></div>`);
            });
        }

        // MODALS
        function openDep(){ document.getElementById('modal-dep').classList.remove('hidden'); updNum(); }
        function openWith(){ document.getElementById('modal-with').classList.remove('hidden'); }
        function clsMod(){ document.querySelectorAll('.modal').forEach(m=>m.classList.add('hidden')); }
        function updNum(){
            const m=document.getElementById('dep-m').value.toLowerCase(); 
            if(settings?.nums && settings.nums[m]) document.getElementById('adm-num').innerText = settings.nums[m];
            else document.getElementById('adm-num').innerText = "Not Set";
        }
        function subDep(){
            const a=Number(document.getElementById('dep-a').value), t=document.getElementById('dep-t').value;
            if(a&&t){
                db.ref('deposits').push({uid:auth.currentUser.uid, amount:a, trx:t, method:document.getElementById('dep-m').value, status:'pending', email:user.email});
                alert("Deposit Request Sent!"); clsMod();
            }
        }
        function subWith(){
            const a=Number(document.getElementById('with-a').value);
            if(a>user.balance) return alert("Low Balance");
            db.ref('users/'+auth.currentUser.uid).update({balance:user.balance-a});
            db.ref('withdraws').push({uid:auth.currentUser.uid, amount:a, number:document.getElementById('with-n').value, method:document.getElementById('with-m').value, status:'pending', email:user.email});
            addHist('Withdraw', a, 'Pending', 'red');
            alert("Withdraw Request Sent!"); clsMod();
        }
        function changePass(){
            const p=document.getElementById('new-pass').value;
            if(p) auth.currentUser.updatePassword(p).then(()=>alert("Password Updated")).catch(e=>alert(e.message));
        }
        function openSupport(){ if(settings?.telegram) window.open(settings.telegram); }
        function nav(id, el){
            document.querySelectorAll('.nav-item').forEach(i=>i.classList.remove('active')); el.classList.add('active');
            ['home','task','invest','prof','hist'].forEach(x=>document.getElementById('tab-'+x)?.classList.add('hidden'));
            document.getElementById('tab-'+id).classList.remove('hidden');
        }
    </script>
</body>
</html>
